# 工艺分解功能说明

## 功能概述

根据合同参数以及装箱单详情生成每个箱包的工艺工件分解表。包括

1. 列出箱包内部件以及部件的所有子部件的列表，列出所需的数量，是否外购
2. 可以导出整个装箱单所有箱包的所有部件统计表，也就是箱包工艺分解表的汇总表

## 功能流程

### 搜索选择合同

工艺分解界面上搜索合同号或者项目号，选择合同进行工艺分解

### 选择箱包进行分解

在弹出界面选择箱包，点击工艺分解

### 工艺分解过程

1. 根据该箱包部件表的内容，去components表中匹配component_No
2. 如果能找到，则记录下来这个component作为分解表中的部件。然后根据components_relationship表的关联内容查找子部件
3. 子部件也记录进分解表
4. 如果在上述步骤中找不到匹配项，记录为问题部件，写在备注中。
5. 如果有同一个component_no 的部件，认为是同种部件，合并计算数量

### 生成导出工艺分解汇总

1. 生成所有箱包的工艺分解并且导出汇总表，同一个component_no的部件合并计算数量

