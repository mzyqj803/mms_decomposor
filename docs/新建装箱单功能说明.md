# 新建装箱单功能说明

## 功能概述

新建装箱单功能允许用户通过两种方式创建装箱单：
1. 上传Excel文件创建装箱单
2. 克隆现有装箱单创建新装箱单

## 功能流程

### 1. 选择合同
- **选择现有合同**：从合同列表中选择已有的合同
- **创建新合同**：填写合同信息创建新合同

### 2. 创建装箱单
提供两种创建方式：

#### 方式一：上传Excel文件
- 支持 `.xlsx` 和 `.xls` 格式
- 文件大小限制：10MB
- 拖拽上传或点击上传
- 系统自动解析Excel内容并创建装箱单

#### 方式二：克隆现有装箱单
- 系统根据合同参数自动搜索相似的装箱单
- 用户可以从搜索结果中选择要克隆的装箱单
- 确认后系统将复制装箱单内容到当前合同

## 技术实现

### 前端组件
- `CreateContainerDialog.vue`：新建装箱单对话框组件
- 使用Element Plus UI组件库
- 支持步骤式操作流程

### 后端API
- `ContainerUploadController`：装箱单上传控制器
- `ContainerUploadService`：装箱单上传服务
- 支持文件上传、相似装箱单搜索、装箱单克隆等功能

### API接口
```
POST /api/contracts/{contractId}/containers/upload     # 上传Excel文件
GET  /api/contracts/{contractId}/containers/similar    # 搜索相似装箱单
POST /api/contracts/{contractId}/containers/clone     # 克隆装箱单
GET  /api/contracts/{contractId}/containers            # 获取装箱单列表
DELETE /api/contracts/{contractId}/containers/{containerId}  # 删除装箱单
```

## 使用说明

1. 在装箱单管理页面点击"新建装箱单"按钮
2. 选择合同（现有合同或创建新合同）
3. 选择创建方式：
   - 上传Excel文件：选择文件并上传
   - 克隆装箱单：搜索并选择要克隆的装箱单
4. 完成创建，系统自动跳转到装箱单列表

## 注意事项

- Excel文件必须包含正确的装箱单数据结构
- 克隆功能会复制源装箱单的所有组件信息
- 创建过程中如有错误，系统会显示相应的错误信息
- 建议在上传前检查Excel文件格式是否正确
